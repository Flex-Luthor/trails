# Test against this version of Node.js
environment:
  compiler: gcc-4.8.4-posix

  matrix:
  - nodejs_version: "4"
  - nodejs_version: "5"
  - nodejs_version: "6"
  - REQUIRED_TESTS: "true"
  - OPTIONAL_TESTS: "true"

matrix:
  fast_finish: true
  allow_failures:
    - OPTIONAL_TESTS: true
    - platform: x86

# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node $env:nodejs_version
  # install modules
  - npm install

platform:
  - x64
  - x86

test_script:
  - node -v
  - npm -v
  - IF %REQUIRED_TESTS% EQU "true" npm test
  - IF %OPTIONAL_TESTS% EQU "true" npm run ci

# Don't actually build.
build: off
